(function(a){a.fn.regionSelect=function(i){if(this.length<1){return}var i=a.extend({url:"/global/js/fashion/region.min.js",region:null,continent:null,country:null,city:null,nodata:"none",required:false,mod:false},i);var d=this;var j=d.find(".region");var n=d.find(".continent");var l=d.find(".country");var h=d.find(".city");var m=i.region;var o=i.continent;var f=i.country;var k=i.city;var c=(i.required)?"":"<option value=''>请选择</option>";var b;var e=function(){var r=j.get(0).selectedIndex;if(!i.required){r--}n.empty().attr("disabled",true);l.empty().attr("disabled",true);h.empty().attr("disabled",true);if(r<0||typeof(b.regionlist[r].con)=="undefined"){if(i.nodata=="none"){n.css("display","none");l.css("display","none");h.css("display","none")}else{if(i.nodata=="hidden"){n.css("visibility","hidden");l.css("visibility","hidden");h.css("visibility","hidden")}}return}temp_html=c;a.each(b.regionlist[r].con,function(t,s){temp_html+="<option value='"+s.id+"' "+(s.id==o?"selected":"")+">"+s.n+"</option>"});n.html(temp_html).attr("disabled",false).css({"display":"","visibility":""});g();q()};var g=function(){var s=j.get(0).selectedIndex;var r=n.get(0).selectedIndex;if(!i.required){s--;r--}l.empty().attr("disabled",true);h.empty().attr("disabled",true);if(s<0||r<0||typeof(b.regionlist[s].con[r].cou)=="undefined"){if(i.nodata=="none"){l.css("display","none");h.css("display","none")}else{if(i.nodata=="hidden"){l.css("visibility","hidden");h.css("visibility","hidden")}}return}temp_html=c;a.each(b.regionlist[s].con[r].cou,function(t,u){temp_html+="<option value='"+u.id+"' "+(u.id==f?"selected":"")+">"+u.n+"</option>"});l.html(temp_html).attr("disabled",false).css({"display":"","visibility":""});q()};var q=function(){var s=j.get(0).selectedIndex;var r=n.get(0).selectedIndex;var t=l.get(0).selectedIndex;if(!i.required){s--;r--;t--}h.empty().attr("disabled",true);if(s<0||r<0||t<0||typeof(b.regionlist[s].con[r].cou[t].c)=="undefined"){if(i.nodata=="none"){h.css("display","none")}else{if(i.nodata=="hidden"){h.css("visibility","hidden")}}return}temp_html=c;a.each(b.regionlist[s].con[r].cou[t].c,function(u,v){temp_html+="<option value='"+v.id+"' "+(v.id==k?"selected":"")+">"+v.n+"</option>"});h.html(temp_html).attr("disabled",false).css({"display":"","visibility":""})};var p=function(){temp_html=c;a.each(b.regionlist,function(s,t){temp_html+="<option value='"+t.id+"' "+(t.id==m?"selected":"")+">"+t.n+"</option>"});j.html(temp_html);j.on("change",function(){e()});n.on("change",function(){g()});l.on("change",function(){q()});if(i.mod){j.triggerHandler("change")}};if(typeof(i.url)=="string"){a.getJSON(i.url,function(r){b=r;p()})}else{b=i.url;p()}}})(jQuery);