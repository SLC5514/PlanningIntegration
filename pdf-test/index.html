<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>pdf-test</title>
    <link rel="stylesheet" href="./index.css" />
    <script src="https://cdn.bootcdn.net/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
  </head>
  <body>
    <div class="report-content-wrap js-report-content-wrap"></div>
  </body>
  <script>
    var isPdf = true;
    var reportData = [{"sub_id":86513,"page_id":339190,"uuid":"7a781d51-9a18-495b-9886-77c9f211d71c","tpl_id":"00000000-0000-0000-0000-000000000000","type":"page","title":"目录","tag":[],"style":{"width":1176,"height":868},"backgroundElement":{"uuid":"00000000-0000-0000-0001-000000000000","type":"background","attr":{"brandName":"","imageInfo":"","linkType":0,"link":"","videoId":"","position":{"h":"left","v":"bottom","x":6,"y":6}},"style":{"width":"100%","height":"100%","left":0,"top":0,"borderStyle":"solid","borderColor":"#000000","borderWidth":0,"borderRadius":0,"paddingTop":0,"paddingBottom":0,"paddingLeft":0,"paddingRight":0,"opacity":100,"rotate":0,"fliph":1,"flipv":1,"shadowColor":"#000000","shadowH":0,"shadowV":0,"shadowBlur":0,"color":"#333333","fontSize":14,"fontWeight":"normal","textDecoration":"none","textAlign":"left","letterSpacing":0,"lineHeight":1,"background":"#ffffff"},"clip":{"w":0,"h":0,"x":0,"y":0,"scale":1,"image":"","cutout":"","origin":"","host":""}},"elements":[{"uuid":"8755484e-e252-4cbd-9558-756a9ba36dd7","type":"text","text":"目录","style":{"width":112,"height":60,"left":32,"top":32,"borderStyle":"solid","borderColor":"#000000","borderWidth":0,"borderRadius":0,"paddingTop":0,"paddingBottom":0,"paddingLeft":0,"paddingRight":0,"opacity":100,"rotate":0,"fliph":1,"flipv":1,"shadowColor":"#000000","shadowH":0,"shadowV":0,"shadowBlur":0,"color":"#ffffff","fontSize":36,"fontWeight":"bold","textDecoration":"none","textAlign":"center","letterSpacing":0,"lineHeight":60,"background":"#1A232C"}},{"uuid":"911c1e85-0af9-4024-a24c-e42a373fcbd4","type":"text","text":"近年来“内衣外穿”的穿搭形式受到了很多消费者的追捧，人们开始追求能搭配现有服饰的简约基础款，胸衣、抹胸、休闲打底等基础内衣款式为内衣品牌跨入成衣领域创造了契机。本篇报告内衣与家居服主打无拘束的自由风格，使内衣家居服日常化，运用极具设计感的廓形使基本款化身为精致<span style=\"font-family: inherit; font-size: inherit; font-style: inherit; font-variant-ligatures: inherit; font-variant-caps: inherit; font-weight: inherit; letter-spacing: 0px;\">日常造型。</span>","style":{"width":1100.5,"height":72,"left":33.5,"top":114,"borderStyle":"solid","borderColor":"#000000","borderWidth":0,"borderRadius":0,"paddingTop":0,"paddingBottom":0,"paddingLeft":0,"paddingRight":0,"opacity":100,"rotate":0,"fliph":1,"flipv":1,"shadowColor":"#000000","shadowH":0,"shadowV":0,"shadowBlur":0,"color":"#555555","fontSize":16,"fontWeight":"normal","textDecoration":"none","textAlign":"left","letterSpacing":0,"lineHeight":30}},{"uuid":"7798c4aa-bca1-4489-9957-9c7e14874764","type":"text","text":"<span style=\"color: rgb(0, 0, 0); font-size: 25px;\">U型缺口</span>","style":{"width":42,"height":220,"left":78,"top":616,"borderStyle":"solid","borderColor":"#000000","borderWidth":0,"borderRadius":0,"paddingTop":0,"paddingBottom":0,"paddingLeft":0,"paddingRight":0,"opacity":100,"rotate":0,"fliph":1,"flipv":1,"shadowColor":"#000000","shadowH":0,"shadowV":0,"shadowBlur":0,"color":"#ffffff","fontSize":94,"fontWeight":"bold","textDecoration":"none","textAlign":"center","letterSpacing":0,"lineHeight":12.5,"background":"rgba(255, 255, 255, 0)"}},{"uuid":"6c127db1-44e2-42d1-bad1-bd386f45aed5","type":"text","text":"<span style=\"color: rgb(0, 0, 0); font-size: 25px;\">V型缺口</span>","style":{"width":42,"height":220,"left":249,"top":354,"borderStyle":"solid","borderColor":"#000000","borderWidth":0,"borderRadius":0,"paddingTop":0,"paddingBottom":0,"paddingLeft":0,"paddingRight":0,"opacity":100,"rotate":0,"fliph":1,"flipv":1,"shadowColor":"#000000","shadowH":0,"shadowV":0,"shadowBlur":0,"color":"#ffffff","fontSize":94,"fontWeight":"bold","textDecoration":"none","textAlign":"center","letterSpacing":0,"lineHeight":12.5,"background":"rgba(255, 255, 255, 0)"}},{"uuid":"1c7b6bad-2f2a-41d6-bc65-896ec6f193d1","type":"text","text":"<span style=\"color: rgb(0, 0, 0); font-size: 25px;\">胸间链接</span>","style":{"width":42,"height":220,"left":277,"top":613,"borderStyle":"solid","borderColor":"#000000","borderWidth":0,"borderRadius":0,"paddingTop":0,"paddingBottom":0,"paddingLeft":0,"paddingRight":0,"opacity":100,"rotate":0,"fliph":1,"flipv":1,"shadowColor":"#000000","shadowH":0,"shadowV":0,"shadowBlur":0,"color":"#ffffff","fontSize":94,"fontWeight":"bold","textDecoration":"none","textAlign":"center","letterSpacing":0,"lineHeight":12.5,"background":"rgba(255, 255, 255, 0)"}},{"uuid":"da323732-9039-4ef0-acdc-580b013cb41b","type":"text","text":"<span style=\"color: rgb(0, 0, 0); font-size: 25px;\">钢圈缺口</span>","style":{"width":42,"height":220,"left":550,"top":346,"borderStyle":"solid","borderColor":"#000000","borderWidth":0,"borderRadius":0,"paddingTop":0,"paddingBottom":0,"paddingLeft":0,"paddingRight":0,"opacity":100,"rotate":0,"fliph":1,"flipv":1,"shadowColor":"#000000","shadowH":0,"shadowV":0,"shadowBlur":0,"color":"#ffffff","fontSize":94,"fontWeight":"bold","textDecoration":"none","textAlign":"center","letterSpacing":0,"lineHeight":12.5,"background":"rgba(255, 255, 255, 0)"}},{"uuid":"1919ab6b-5a97-4440-89d1-fce7c8ad523b","type":"text","text":"<span style=\"color: rgb(0, 0, 0); font-size: 25px;\">钢圈超出</span>","style":{"width":42,"height":220,"left":567,"top":613,"borderStyle":"solid","borderColor":"#000000","borderWidth":0,"borderRadius":0,"paddingTop":0,"paddingBottom":0,"paddingLeft":0,"paddingRight":0,"opacity":100,"rotate":0,"fliph":1,"flipv":1,"shadowColor":"#000000","shadowH":0,"shadowV":0,"shadowBlur":0,"color":"#ffffff","fontSize":94,"fontWeight":"bold","textDecoration":"none","textAlign":"center","letterSpacing":0,"lineHeight":12.5,"background":"rgba(255, 255, 255, 0)"}},{"uuid":"28c8f4dd-22ec-4c47-abf5-292d32c3e94e","type":"image","attr":{"brandName":"","imageInfo":"","linkType":0,"link":"","videoId":"","position":{"h":"left","v":"bottom","x":6,"y":6}},"style":{"width":1112,"height":642.87156421789,"left":32,"top":190.12843578211,"borderStyle":"solid","borderColor":"#000000","borderWidth":0,"borderRadius":0,"paddingTop":0,"paddingBottom":0,"paddingLeft":0,"paddingRight":0,"opacity":100,"rotate":0,"fliph":1,"flipv":1,"shadowColor":"#000000","shadowH":0,"shadowV":0,"shadowBlur":0,"color":"#333333","fontSize":14,"fontWeight":"normal","textDecoration":"none","textAlign":"left","letterSpacing":0,"lineHeight":1},"clip":{"w":1113.0852575488,"h":646.37605622768,"x":0,"y":0,"scale":1,"image":"/upload/report/image/20210910/2DQCsKKciXRbMWbY6aLLlx72u3qI2pj3KTNLhGU8.png","cutout":"","origin":"upload","host":"https://imgf1.pop-fashion.com"}},{"uuid":"18b5e8ce-0769-4938-8273-098ff432ff35","type":"text","text":"<span style=\"color: rgb(0, 0, 0); font-size: 25px;\">一字胸衣/抹胸\r</span>","style":{"width":48,"height":271.20253164557,"left":133,"top":561.79746835443,"borderStyle":"solid","borderColor":"#000000","borderWidth":0,"borderRadius":0,"paddingTop":0,"paddingBottom":0,"paddingLeft":0,"paddingRight":0,"opacity":100,"rotate":0,"fliph":1,"flipv":1,"shadowColor":"#000000","shadowH":0,"shadowV":0,"shadowBlur":0,"color":"#ffffff","fontSize":94,"fontWeight":"bold","textDecoration":"none","textAlign":"center","letterSpacing":0,"lineHeight":12.5,"background":"rgba(255, 255, 255, 0)"}},{"uuid":"4a70e461-f90f-44d9-84f9-40d2789285f9","type":"image","attr":{"brandName":"","imageInfo":"","linkType":0,"link":"","videoId":"","position":{"h":"left","v":"bottom","x":6,"y":6}},"style":{"width":176,"height":235.59493670886,"left":78,"top":304.90506329114,"borderStyle":"solid","borderColor":"#000000","borderWidth":0,"borderRadius":0,"paddingTop":0,"paddingBottom":0,"paddingLeft":0,"paddingRight":0,"opacity":100,"rotate":0,"fliph":1,"flipv":1,"shadowColor":"#000000","shadowH":0,"shadowV":0,"shadowBlur":0,"color":"#333333","fontSize":14,"fontWeight":"normal","textDecoration":"none","textAlign":"left","letterSpacing":0,"lineHeight":1},"clip":{"w":1080,"h":879,"x":-428,"y":-316.18,"scale":0.28,"image":"/upload/report/image/20210910/qp5vAcDNiBKkKFbs9KD6nsgaLdZQcTf74axkV9Et.jpeg","cutout":"","origin":"upload","host":"https://imgf1.pop-fashion.com"},"styleLibrary":null},{"uuid":"19e4ffc2-0a7d-4332-ada2-560e9cea60f6","type":"image","attr":{"brandName":"","imageInfo":"","linkType":0,"link":"","videoId":"","position":{"h":"left","v":"bottom","x":6,"y":6}},"style":{"width":176,"height":235.59493670886,"left":361,"top":304.90506329114,"borderStyle":"solid","borderColor":"#000000","borderWidth":0,"borderRadius":0,"paddingTop":0,"paddingBottom":0,"paddingLeft":0,"paddingRight":0,"opacity":100,"rotate":0,"fliph":1,"flipv":1,"shadowColor":"#000000","shadowH":0,"shadowV":0,"shadowBlur":0,"color":"#333333","fontSize":14,"fontWeight":"normal","textDecoration":"none","textAlign":"left","letterSpacing":0,"lineHeight":1},"clip":{"w":1080,"h":1350,"x":-451,"y":-556,"scale":0.18,"image":"/upload/report/image/20210910/1UKqTvf0ycMFptbX8H53YJBzCmd6dSSyp0BgdCWj.jpeg","cutout":"","origin":"upload","host":"https://imgf1.pop-fashion.com"},"styleLibrary":null},{"uuid":"ac04a669-dbb6-4a2b-8610-aecafa421fbd","type":"image","attr":{"brandName":"","imageInfo":"","linkType":0,"link":"","videoId":"","position":{"h":"left","v":"bottom","x":6,"y":6}},"style":{"width":176,"height":235.59493670886,"left":395,"top":582.90506329114,"borderStyle":"solid","borderColor":"#000000","borderWidth":0,"borderRadius":0,"paddingTop":0,"paddingBottom":0,"paddingLeft":0,"paddingRight":0,"opacity":100,"rotate":0,"fliph":1,"flipv":1,"shadowColor":"#000000","shadowH":0,"shadowV":0,"shadowBlur":0,"color":"#333333","fontSize":14,"fontWeight":"normal","textDecoration":"none","textAlign":"left","letterSpacing":0,"lineHeight":1},"clip":{"w":1500,"h":1800,"x":-662,"y":-782,"scale":0.14,"image":"/upload/report/image/20210910/C3UnsyWnqvzvVTnbB1LEjogA1EvwtgkTBMEDhpgh.jpeg","cutout":"","origin":"upload","host":"https://imgf1.pop-fashion.com"},"styleLibrary":null},{"uuid":"187fd32f-9471-4eeb-a45a-2e86bfedbead","type":"image","attr":{"brandName":"","imageInfo":"","linkType":0,"link":"","videoId":"","position":{"h":"left","v":"bottom","x":6,"y":6}},"style":{"width":176,"height":235.59493670886,"left":705,"top":307.90506329114,"borderStyle":"solid","borderColor":"#000000","borderWidth":0,"borderRadius":0,"paddingTop":0,"paddingBottom":0,"paddingLeft":0,"paddingRight":0,"opacity":100,"rotate":0,"fliph":1,"flipv":1,"shadowColor":"#000000","shadowH":0,"shadowV":0,"shadowBlur":0,"color":"#333333","fontSize":14,"fontWeight":"normal","textDecoration":"none","textAlign":"left","letterSpacing":0,"lineHeight":1},"clip":{"w":750,"h":1000,"x":-289,"y":-376,"scale":0.25,"image":"/upload/report/image/20210910/7EplfjPHvXZS0kdGeCrrxbTpSUvicYj6wNZpvoPt.jpeg","cutout":"","origin":"upload","host":"https://imgf1.pop-fashion.com"},"styleLibrary":null},{"uuid":"62b0a0ae-2b1d-47bd-b54f-e914e6e84798","type":"text","text":"<span style=\"color: rgb(0, 0, 0); font-size: 25px;\">复古式吊带\r</span>","style":{"width":44,"height":225.5,"left":313,"top":318,"borderStyle":"solid","borderColor":"#000000","borderWidth":0,"borderRadius":0,"paddingTop":0,"paddingBottom":0,"paddingLeft":0,"paddingRight":0,"opacity":100,"rotate":0,"fliph":1,"flipv":1,"shadowColor":"#000000","shadowH":0,"shadowV":0,"shadowBlur":0,"color":"#ffffff","fontSize":94,"fontWeight":"bold","textDecoration":"none","textAlign":"center","letterSpacing":0,"lineHeight":12.5,"background":"rgba(255, 255, 255, 0)"}},{"uuid":"31f3463e-1837-4755-8f5e-6ddf7b8ea2e0","type":"text","text":"<span style=\"color: rgb(0, 0, 0); font-size: 25px;\">长袖紧身衣</span>","style":{"width":42,"height":220,"left":275,"top":605,"borderStyle":"solid","borderColor":"#000000","borderWidth":0,"borderRadius":0,"paddingTop":0,"paddingBottom":0,"paddingLeft":0,"paddingRight":0,"opacity":100,"rotate":0,"fliph":1,"flipv":1,"shadowColor":"#000000","shadowH":0,"shadowV":0,"shadowBlur":0,"color":"#ffffff","fontSize":94,"fontWeight":"bold","textDecoration":"none","textAlign":"center","letterSpacing":0,"lineHeight":10.1,"background":"rgba(255, 255, 255, 0)"}},{"uuid":"f6a9305f-19c1-4958-8b11-7c0003aa1dca","type":"image","attr":{"brandName":"","imageInfo":"","linkType":0,"link":"","videoId":"","position":{"h":"left","v":"bottom","x":6,"y":6}},"style":{"width":176,"height":235.59493670886,"left":715,"top":579.90506329114,"borderStyle":"solid","borderColor":"#000000","borderWidth":0,"borderRadius":0,"paddingTop":0,"paddingBottom":0,"paddingLeft":0,"paddingRight":0,"opacity":100,"rotate":0,"fliph":1,"flipv":1,"shadowColor":"#000000","shadowH":0,"shadowV":0,"shadowBlur":0,"color":"#333333","fontSize":14,"fontWeight":"normal","textDecoration":"none","textAlign":"left","letterSpacing":0,"lineHeight":1},"clip":{"w":640,"h":801,"x":-231,"y":-237.36,"scale":0.59,"image":"/upload/report/image/20210910/fTrcmOxyuBOyz2fisCm7ljXolllIhUv1gmHRZ1bJ.jpeg","cutout":"","origin":"upload","host":"https://imgf1.pop-fashion.com"},"styleLibrary":null},{"uuid":"6ce8b263-6d94-4325-a63a-aed0a9c6cd43","type":"image","attr":{"brandName":"","imageInfo":"","linkType":0,"link":"","videoId":"","position":{"h":"left","v":"bottom","x":6,"y":6}},"style":{"width":176,"height":235.59493670886,"left":929,"top":579.90506329114,"borderStyle":"solid","borderColor":"#000000","borderWidth":0,"borderRadius":0,"paddingTop":0,"paddingBottom":0,"paddingLeft":0,"paddingRight":0,"opacity":100,"rotate":0,"fliph":1,"flipv":1,"shadowColor":"#000000","shadowH":0,"shadowV":0,"shadowBlur":0,"color":"#333333","fontSize":14,"fontWeight":"normal","textDecoration":"none","textAlign":"left","letterSpacing":0,"lineHeight":1},"clip":{"w":1786,"h":2500,"x":-810,"y":-1066,"scale":0.2,"image":"/upload/report/image/20210910/Dxbs0qa62bLlr0ftF9BiU6CXbaCfRTxfDwKTFpGB.jpeg","cutout":"","origin":"upload","host":"https://imgf1.pop-fashion.com"},"styleLibrary":null},{"uuid":"5e2b9170-ef51-40d2-a464-968b167bf057","type":"text","text":"<span style=\"color: rgb(0, 0, 0); font-size: 25px;\">慵懒派对裙</span>","style":{"width":36,"height":232.20253164557,"left":656,"top":302,"borderStyle":"solid","borderColor":"#000000","borderWidth":0,"borderRadius":0,"paddingTop":0,"paddingBottom":0,"paddingLeft":0,"paddingRight":0,"opacity":100,"rotate":0,"fliph":1,"flipv":1,"shadowColor":"#000000","shadowH":0,"shadowV":0,"shadowBlur":0,"color":"#ffffff","fontSize":94,"fontWeight":"bold","textDecoration":"none","textAlign":"center","letterSpacing":0,"lineHeight":12.5,"background":"rgba(255, 255, 255, 0)"}},{"uuid":"045896a5-d33a-4977-b9ef-f38f99f38db1","type":"text","text":"<span style=\"color: rgb(0, 0, 0); font-size: 25px;\">办公休闲套装</span>","style":{"width":43,"height":253.09493670886,"left":607,"top":579.90506329114,"borderStyle":"solid","borderColor":"#000000","borderWidth":0,"borderRadius":0,"paddingTop":0,"paddingBottom":0,"paddingLeft":0,"paddingRight":0,"opacity":100,"rotate":0,"fliph":1,"flipv":1,"shadowColor":"#000000","shadowH":0,"shadowV":0,"shadowBlur":0,"color":"#ffffff","fontSize":94,"fontWeight":"bold","textDecoration":"none","textAlign":"center","letterSpacing":0,"lineHeight":10.6,"background":"rgba(255, 255, 255, 0)"}},{"uuid":"3c34bf82-9063-4a96-9174-d16aefceae71","type":"text","text":"<span style=\"color: rgb(0, 0, 0); font-size: 25px;\">连帽卫衣</span>","style":{"width":42,"height":220,"left":1017,"top":354,"borderStyle":"solid","borderColor":"#000000","borderWidth":0,"borderRadius":0,"paddingTop":0,"paddingBottom":0,"paddingLeft":0,"paddingRight":0,"opacity":100,"rotate":0,"fliph":1,"flipv":1,"shadowColor":"#000000","shadowH":0,"shadowV":0,"shadowBlur":0,"color":"#ffffff","fontSize":94,"fontWeight":"bold","textDecoration":"none","textAlign":"center","letterSpacing":0,"lineHeight":12.5,"background":"rgba(255, 255, 255, 0)"}}],"cover":"/upload/report/page_cover/1/86513_339190.jpg","cover_host":"https://imgf1.pop-fashion.com"}];
    var _html = "";
    for (var i = 0; i < reportData.length; i++) {
      _html +=
        '<div class="report-sub-content indexdiv" id="index_' +
        reportData[i].sub_id +
        '" data-pageid="' +
        reportData[i].page_id +
        '" style="' +
        renderRpStyle(reportData[i].type, reportData[i].style) +
        'page-break-after: always;">';
      if (reportData[i].backgroundElement) {
        _html += renderRpElement(reportData[i].backgroundElement);
      }
      for (var j = 0; j < reportData[i].elements.length; j++) {
        _html += renderRpElement(reportData[i].elements[j]);
      }
      _html += "</div>";
    }
    if (isPdf) $(".js-report-content-wrap").addClass("ispdf");
    $(".js-report-content-wrap").html(_html);
    function initDownPage(uuid) {
      _def.down_list = [];
      var status = false,
        imgList = [];
      for (var i = 0; i < reportData.length; i++) {
        status = false;
        imgList = [];
        for (var j = 0; j < reportData[i].elements.length; j++) {
          if (
            reportData[i].elements[j].type === "image" &&
            (reportData[i].elements[j].clip.cutout ||
              reportData[i].elements[j].clip.image)
          ) {
            imgList.push(reportData[i].elements[j]);
          }
        }
        for (var j = 0; j < imgList.length; j++) {
          if (imgList[j].uuid === uuid) {
            status = true;
            _def.page = j;
            break;
          }
        }
        if (status) {
          for (var j = 0; j < imgList.length; j++) {
            var styleLibrary = imgList[j].styleLibrary || {};
            var src =
              (imgList[j].clip.host || "https://imgf1.pop-fashion.com") +
              (imgList[j].clip.cutout || imgList[j].clip.image);
            var suffix = src.replace(/.+(\.\w+)$/, "$1");
            _def.down_list.push({
              photo: {
                id: styleLibrary.id + "" || "",
                big: src,
                rename:
                  "pop_" +
                  (styleLibrary.brand || imgList[j].attr.brandName) +
                  (styleLibrary.brand ? "_" + styleLibrary.brand_id : "") +
                  suffix,
              },
            });
          }
        }
      }
    }
    function renderRpElement(element) {
      var _html = "";
      _html +=
        '<div class="element element-' +
        element.type +
        '" style="' +
        renderRpStyle(element.type, element.style) +
        '">';
      if (element.type === "text") {
        _html += "<p>" + element.text + "</p>";
      }
      if (
        (element.type === "image" || element.type === "background") &&
        (element.clip.cutout || element.clip.image)
      ) {
        var imgStyle = {
          width: element.clip.w ? element.clip.w + "px" : "auto",
          height: element.clip.h ? element.clip.h + "px" : "auto",
          left: element.clip.x + "px",
          top: element.clip.y + "px",
          transform:
            "scale(" +
            element.clip.scale * element.style.fliph +
            ", " +
            element.clip.scale * element.style.flipv +
            ")",
        };
        var src =
          (element.clip.host || "https://imgf1.pop-fashion.com") +
          (element.clip.cutout || element.clip.image);
        var styleLibrary = element.styleLibrary || {};
        var big = element.clip.cutout || element.clip.image || "";
        var suffix = big.replace(/.+(\.\w+)$/, "$1");
        var rename =
          styleLibrary.brand || (element.attr && element.attr.brandName)
            ? "pop_" +
              (styleLibrary.brand || (element.attr && element.attr.brandName)) +
              (styleLibrary.brand ? "_" + styleLibrary.brand_id : "") +
              suffix
            : "";
        if (
          element.type !== "background" &&
          !(element.attr && element.attr.videoId)
        ) {
          _html +=
            '<div class="img-wrap preview-img js-preview-img-btn" data-uuid="' +
            element.uuid +
            '" data-id="' +
            (styleLibrary.id || "") +
            '" data-src="' +
            src +
            '" data-rename="' +
            rename +
            '">';
        } else {
          _html += '<div class="img-wrap">';
        }
        if (isPdf && imgStyle.width !== 'auto' && imgStyle.height !== 'auto') {
            var w = parseFloat(imgStyle.width);
            var h = parseFloat(imgStyle.height);
            var l = parseFloat(imgStyle.left);
            var t = parseFloat(imgStyle.top);
            var sw = w * element.clip.scale;
            var sh = h * element.clip.scale;
            var x = l + (w - sw) / 2;
            var y = t + (h - sh) / 2;
            if (element.style.fliph < 0) x = parseFloat(element.style.width) - (sw + (l + (w - sw) / 2));
            if (element.style.flipv < 0) y = parseFloat(element.style.height) - (sh + (t + (h - sh) / 2));
            var testStyle = {
                width: '100%',
                height: '100%',
                backgroundRepeat: 'no-repeat',
                backgroundSize: parseFloat(sw.toFixed(2)) + 'px ' + parseFloat(sh.toFixed(2)) + 'px',
                backgroundPosition: parseFloat(x.toFixed(2)) + 'px ' + parseFloat(y.toFixed(2)) + 'px',
                backgroundImage: 'url(' + src + ')',
                transform: 'scale(' + element.style.fliph + ', ' + element.style.flipv + ')',
                borderRadius: 'inherit'
            }
            _html += '<div class="hover-wrap js-hover-wrap"><div style="' + styleToString(testStyle) + '"></div></div>';
        } else {
        _html +=
          '<div class="hover-wrap js-hover-wrap"><img ' +
          (isPdf ? "src" : "data-original") +
          '="' +
          src +
          '" style="' +
          styleToString(imgStyle) +
          '" /></div>';
        }
        _html += "</div>";
        if (
          element.type === "image" &&
          !(element.attr && element.attr.videoId) &&
          (element.clip.cutout || element.clip.image)
        ) {
          _html +=
            '<div class="img-tool" style="transform: rotate(' +
            -element.style.rotate +
            'deg);">';
          _html +=
            '<a class="tool-preview js-preview-img-btn" href="javascript:;" title="查看大图" data-uuid="' +
            element.uuid +
            '" data-id="' +
            (styleLibrary.id || "") +
            '" data-src="' +
            src +
            '" data-rename="' +
            rename +
            '"></a>';
          _html +=
            '<a class="tool-download js-download-img-btn" href="javascript:;" title="下载" data-uuid="' +
            element.uuid +
            '" data-id="' +
            (styleLibrary.id || "") +
            '" data-src="' +
            src +
            '" data-rename="' +
            rename +
            '"></a>';
          if (element.attr && element.attr.link) {
            _html +=
              '<a class="tool-link" href="' +
              element.attr.link +
              '" title="详情" target="_blank"></a>';
          }
          _html += "</div>";
        }
      }
      if (element.type === "svg") {
        _html +=
          '<svg viewBox="0 0 ' +
          element.style.w +
          " " +
          element.style.h +
          '" preserveAspectRatio="none" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">';
        for (var i = 0; i < element.paths.length; i++) {
          _html +=
            '<path d="' +
            element.paths[i].path +
            '" fill="' +
            element.paths[i].fill +
            '"></path>';
        }
        _html += "</svg>";
      }
      if (element.type === "group") {
        for (var i = 0; i < element.elements.length; i++) {
          _html += renderRpElement(element.elements[i]);
        }
      }
      if (element.type === "image" && element.attr && element.attr.brandName) {
        var position = element.attr.position || {};
        var brandNameStyle = {
          transform: "rotate(" + -element.style.rotate + "deg)",
        };
        brandNameStyle[position.h || "left"] = (position.x || 6) + "px";
        brandNameStyle[position.h === "right" ? "left" : "right"] = "auto";
        brandNameStyle[position.v || "bottom"] = (position.y || 6) + "px";
        brandNameStyle[position.v === "bottom" ? "top" : "bottom"] = "auto";
        _html +=
          '<a class="brand-name" href="' +
          ("/search/?key=" +
            encodeURIComponent(encodeURIComponent(element.attr.brandName))) +
          '" target="_blank" style="' +
          styleToString(brandNameStyle) +
          '">' +
          element.attr.brandName +
          "</a>";
      }
      if (element.type === "image" && element.attr && element.attr.videoId) {
        var videoPlayStyle = {
          transform: "rotate(" + -element.style.rotate + "deg)",
        };
        _html +=
          '<button class="video-play" title="播放" data-videoId="' +
          element.attr.videoId +
          '" style="' +
          styleToString(videoPlayStyle) +
          '"><i></i>视频</button>';
      }
      _html += "</div>";
      return _html;
    }
    function renderRpStyle(type, styles) {
      var style = {};
      var needUnitStr = [
        "width",
        "height",
        "top",
        "left",
        "paddingTop",
        "paddingLeft",
        "paddingRight",
        "paddingBottom",
        "marginTop",
        "marginLeft",
        "marginRight",
        "marginBottom",
        "borderWidth",
        "fontSize",
        "borderRadius",
        "letterSpacing",
      ];
      var textStyleStr = [
        "paddingTop",
        "paddingLeft",
        "paddingRight",
        "paddingBottom",
      ];
      var transformStr = ["rotate", "fliph", "flipv"];
      var shadowStr = ["shadowColor", "shadowBlur", "shadowH", "shadowV"];
      var noNeedUnitStr = ["x", "y", "w", "h"];
      for (var key in styles) {
        if (
          styles[key] === "auto" ||
          styles[key] === "normal" ||
          styles[key] === "100%"
        ) {
          // 属性兼容
          style[key] = styles[key];
        } else if (needUnitStr.indexOf(key) !== -1) {
          if (textStyleStr.indexOf(key) !== -1) {
            if (type === "text") style[key] = styles[key] + "px";
          } else {
            style[key] = styles[key] + "px";
          }
        } else if (noNeedUnitStr.indexOf(key) !== -1) {
          continue;
        } else if (key === "opacity") {
          style[key] = styles[key] / 100;
        } else if (transformStr.indexOf(key) !== -1) {
          style["transform"] = "rotate(" + styles["rotate"] + "deg)";
        } else if (shadowStr.indexOf(key) !== -1) {
          style["boxShadow"] =
            styles["shadowH"] +
            "px " +
            styles["shadowV"] +
            "px " +
            styles["shadowBlur"] +
            "px " +
            styles["shadowColor"];
        } else if (key === "lineHeight" && styles[key] > 10) {
          style[key] = styles[key] + "px";
        } else {
          style[key] = styles[key];
        }
      }
      return styleToString(style);
    }
    function styleToString(styles) {
      var style = "";
      for (var i in styles) {
        var key = i.replace(/([A-Z])/g, function ($1) {
          return "-" + $1.toLowerCase();
        });
        if (isPdf && key === "letter-spacing") {
          style += key + ":0;";
        } else if (
          key === "background" &&
          styles[i] &&
          styles[i].length === 9
        ) {
          style += key + ":" + hex8ToRgba(styles[i]) + ";";
        } else {
          style += key + ":" + styles[i] + ";";
        }
        if (key === "transform" && styles[i]) {
          style += "-webkit-transform:" + styles[i] + ";";
        } else if (
          key === "background" &&
          styles[i] &&
          styles[i].indexOf("linear-gradient") !== -1
        ) {
          var matchStr = styles[i]
            .match(/^linear-gradient\((.*)\)$/)[1]
            .split(/deg,\s?|%,\s?|%/)
            .filter(function (v) {
              return v;
            })
            .map(function (v, i) {
              if (i === 0) {
                return 90 - parseFloat(v) + "deg";
              }
              return v + "%";
            })
            .toString();
          style += key + ":-webkit-linear-gradient(" + matchStr + ");";
        }
      }
      return style;
    }
    function hex8ToRgba(bgColor) {
      var color = bgColor.slice(1);
      var rgba = [
        parseInt("0x" + color.slice(0, 2)),
        parseInt("0x" + color.slice(2, 4)),
        parseInt("0x" + color.slice(4, 6)),
        parseInt("0x" + color.slice(6, 8)),
      ];
      return "rgba(" + rgba.toString() + ")";
    }
  </script>
</html>
<script>
  window.onload = function() {
    window.status = 'render-pdf';
  };
  // wkhtmltopdf -B 0 -L 0 -R 0 -T 0 -O Landscape --javascript-delay 10000 --no-stop-slow-scripts --window-status render-pdf --image-quality 94 --page-width 238mm --page-height 282.5mm -q "http://127.0.0.1:5500/pdf-test/index.html" test.pdf
</script>
