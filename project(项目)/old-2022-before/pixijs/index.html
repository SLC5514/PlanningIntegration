<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <style>
        *{margin: 0;padding: 0;}
        body{background-color: #eee;}
        .grad{position: fixed;left: 0;top: 0;width: 200px;height: 100%;display: flex;flex-wrap: wrap;align-content: flex-start;z-index: 99;}
        .grad>div{width: 100px;height: 100px;border: 1px solid #eee;box-sizing: border-box;}
    </style>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/pixi.js/5.1.3/pixi.min.js"></script>
    <script src="./scaleToWindow.js"></script>
</head>
<body>
    <div class="grad">
        <div></div>
        <div></div>
        <div></div>
    </div>
</body>
<!-- <script>
    // 如果可能，应用程序将使用 WebGL 创建渲染器，
    // 并回退到画布渲染。它也将设置在自动收报机
    //和根阶段PIXI.Container
    const app = new PIXI.Application();

    // 应用程序将为您创建一个画布元素
    // 您可以将其插入到 DOM文档中
    document.body.appendChild(app.view);

    // 加载我们需要的纹理
    app.loader.add('bunny', 'bunny.png').load((loader, resources) => {
        // 这产生从“bunny.png”图像的纹理
        const bunny = new PIXI.Sprite(resources.bunny.texture);

        // 设置的兔子的位置
        bunny.x = app.renderer.width / 2;
        bunny.y = app.renderer.height / 2;

        // 围绕中心
        bunny.anchor.x = 0.5;
        bunny.anchor.y = 0.5;

        // 将兔子添加到我们正在构建的场景中
        app.stage.addChild(bunny);

        // 监听帧更新
        app.ticker.add(() => {
            // 每一帧我们都让兔子绕着小兔子旋转
            bunny.rotation += 0.01;
        });
    });
</script> -->
<script>
    // Pixi 会自动计算
    // let type = "WebGL";
    // if (!PIXI.utils.isWebGLSupported()) {
    //     type = "canvas";
    // }
    // PIXI.utils.sayHello(type);

    // 别名
    let $Application = PIXI.Application,
        $loader = PIXI.loader,
        $resources = PIXI.loader.resources,
        $Sprite = PIXI.Sprite,
        $TextureCache = PIXI.utils.TextureCache;

    // 创建 Pixi 应用 和 舞台
    // http://pixijs.download/release/docs/PIXI.Application.html
    const app = new $Application({ // 常用参数
        width: 256,         // default: 800
        height: 256,        // default: 600
        antialias: true,    // default: false   抗锯齿
        transparent: false, // default: false   透明度
        resolution: 1       // default: 1       分辨率
    });

    // 将 Pixi 自动为你创建的画布添加到 HTML 文档中
    document.body.appendChild(app.view);

    app.renderer.backgroundColor = 0xcccccc; // 调整背景色 16进制

    // 如果你想让canvas占据整个窗口，你可以将这些CSS代码放在文档中，并且刷新你浏览器窗口的大小
    app.renderer.view.style.position = "absolute";
    app.renderer.view.style.display = "block";
    app.renderer.autoResize = true;
    app.renderer.resize(window.innerWidth, window.innerHeight);

    // 如果你想要canvas在任何浏览器中统一尺寸，你可以使用 scaleToWindow 成员函数.
    // https://github.com/kittykatattack/scaleToWindow
    var scale = scaleToWindow(app.renderer.view);
    console.log(scale)

    // Pixi 精灵

    // 添加文字
    let message = new PIXI.Text("Hello Pixi!");
    app.stage.addChild(message);

    // 添加纹理
    $loader
        .add("bunnyImage", "bunny.png") // 别名方式
        .add("catImage", "LearningPixi/examples/images/cat.png")
        .on("progress", loadProgressHandler)
        .load(setup);

    // 加载中
    function loadProgressHandler(loader, resource) {
        // 显示当前正在加载的文件`url`
        console.log("loading: " + resource.name + "》" + resource.url);

        // 显示当前加载的文件百分比
        console.log("progress: " + loader.progress + "%");
    }
    // 加载完成
    function setup(loader, resources) {
        console.log("setup");
        // 方式一   纹理缓存
        let bunny = new $Sprite($TextureCache["bunnyImage"]);
        app.stage.addChild(bunny);

        // 方式二   resources
        let cat = new $Sprite(resources.catImage.texture);
        app.stage.addChild(cat);

        // 移除
        app.stage.removeChild(bunny);

        // 精灵位置 或 cat.position.set(100, 100);
        cat.x = 100;
        cat.y = 100;
        // 精灵尺寸
        cat.width = 100;
        cat.height = 100;
        // 精灵比例 或 cat.scale.set(0.8, 0.8);
        // cat.scale.x = 0.8;
        // cat.scale.y = 0.8;
        // 改变锚点 或 cat.anchor.set(x, y) （左上角）（旋转中心）
        // cat.anchor.x = 0.5;
        // cat.anchor.y = 0.5;
        // 改变原点
        cat.pivot.set(20);
        // 精灵旋转
        // cat.rotation = 0.5;
    }

</script>
</html>